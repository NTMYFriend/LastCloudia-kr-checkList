<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=1280">
    <title>LastCloudia-KR-CheckList</title>
    <style>
        html,body{
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }        
        #header{
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 60px;
            height: 5%;
        }
        #wrapper{
            display: flex; 
            justify-content: center;
            align-items: center; 
            width: 100%; 
            height: 90%;        
        }
        #wrapper > div{
            height: 100%;
            width: 50%;
            padding: 30px;
        }
        img{
            width: 80px;
            height: 80px;
            opacity: 0.3;
        }
        h2, h3, p, span{ color: white; }
        button{ height: 35px; font-size: 18px; }
    </style>
    <script>        
        const nomalUnitCnt = 26;
        const limitUnitCnt = 2;
        const collabUnitCnt = 0;
        const monsterCnt = 10;;

        const rlArk = 0;
        const rcArk = 0;
        const rArk = 24;

        const srArk = 22;
        const srlArk = 0;
        const srcArk = 0;

        const ssrArk = 19;
        const ssrlArk = 0;
        const ssrcArk = 0;

        const urArk = 0;
        const lrArk = 0;

        const maxUnitCnt = nomalUnitCnt + limitUnitCnt + collabUnitCnt + monsterCnt;
        const maxArkCnt = rArk + rlArk + rcArk + srArk + srlArk + srcArk + ssrArk + ssrlArk + ssrcArk + urArk + lrArk;     
        const unitInfo = {
            nomal : 
            {
                rate : "nomal"
                ,cnt : nomalUnitCnt
                ,title : "일반"            
            }, 
            limit : 
            {
                rate : "limit"
                ,cnt : limitUnitCnt
                ,title : "한정"            
            }, 
            collab : 
            {
               rate : "collab"
               ,cnt : collabUnitCnt
               ,title : "콜라보"            
            }, 
            monster : 
            {
               rate : "monster"
               ,cnt : monsterCnt
               ,title : "몬스터"            
            }, 
        };
        const arkInfo = {
            r : 
            {
                rate : "r"
                ,cnt : rArk
                ,limitCnt : rlArk
                ,collabCnt : rcArk 
                ,title : "R 등급"            
            }, 
            sr : 
            {
                rate : "sr"
                ,cnt : srArk
                ,limitCnt : srlArk
                ,collabCnt : srcArk
                ,title : "SR 등급"            
            }, 
            ssr : 
            {
               rate : "ssr"
               ,cnt : ssrArk
               ,limitCnt : ssrlArk
               ,collabCnt : ssrcArk
               ,title : "SSR 등급"            
            }, 
            ur : 
            {
               rate : "ur"
               ,cnt : urArk
               ,title : "UR 등급"            
            }, 
            lr : 
            {
               rate : "lr"
               ,cnt : lrArk
               ,title : "LR 등급"            
            }, 
        };
           
        let isFlag = false;
        let isCurrOpacity = false;
        let selectUnitFlag = 0;
        let selectArkFlag = 0;        
        let currUnitCnt = 0;
        let currArkCnt = 0;        
        let unit = "";
        let ark = "";
        let arkClass = "";
        let id = "";

        document.addEventListener("DOMContentLoaded", function(){            
            fncLoad();
        });

        function fncLoad(){
            const div_unit = document.querySelector("#unit");
            const div_ark = document.querySelector("#ark");
            document.querySelector("#maxUnit").innerHTML = maxUnitCnt;
            document.querySelector("#maxArk").innerHTML = maxArkCnt;            

            for(let key in unitInfo){ unit += fncCreateUnitHtml(unitInfo[key]); }
            for(let key in arkInfo) { ark += fncCreateArkHtml(arkInfo[key]); }

            div_unit.insertAdjacentHTML('beforeend', unit);
            div_ark.insertAdjacentHTML('beforeend', ark);   
        }

        function fncCreateUnitHtml(item){                        
            let returnItem = "";   
            if(item.cnt > 0){
                returnItem += "<div><p>■■■■■■■" + item.title + "■■■■■■■</p>";
                for(let i = 1; i <= item.cnt; ++i){ returnItem += '<img id="unit' +(item.rate + i)+'" src="./unit/' + item.rate + '/'  + i + '.png" onclick="fncUnitSelect(unit' + (item.rate + i) + ')">'; }
                returnItem += "</div>";
            }         
            return returnItem;
        }

        function fncCreateArkHtml(item){            
            let returnItem = "";   
            if(item.cnt > 0){
                returnItem += "<div><p>■■■■■■■" + item.title + "■■■■■■■</p>";
                for(let i = 1; i <= item.cnt; ++i){ returnItem += '<img id="ark'   + (item.rate+ i) +'" src="./ark/'+ item.rate +'/'   + i + '.png" onclick="fncArkSelect(' + ("ark"   + item.rate + i ) + ')">' }

                if(item.limitCnt > 0){
                    returnItem += "<div><p>■■■■■■■" + item.title + " 한정 ■■■■■■■</p>";
                    for(let i = 1; i <= item.limitCnt; ++i){ returnItem += '<img id="arkl'   + (item.rate+ i) +'" src="./ark/'+ item.rate +'/l/'   + i + '.png" onclick="fncArkSelect(' + ("arkl"   + item.rate + i ) + ')">' }
                    returnItem += "</div>";
                }
                if(item.collabCnt > 0){
                    returnItem += "<div><p>■■■■■■■" + item.title + " 콜라보 ■■■■■■■</p>";
                    for(let i = 1; i <= item.collabCnt; ++i){ returnItem += '<img id="arkc'   + (item.rate+ i) +'" src="./ark/'+ item.rate +'/c/'   + i + '.png" onclick="fncArkSelect(' + ("arkc"   + item.rate + i ) + ')">' }
                    returnItem += "</div>";
                }
                returnItem += "</div>";
            }
            return returnItem;
        }

        function fncUnitSelect(target){        
            isCurrOpacity = window.getComputedStyle(target).opacity >= 1;                        
            currUnitCnt = Number(document.querySelector("#currUnit").innerHTML);
            target.style.opacity = isCurrOpacity ? 0.3 : 1;        
            document.querySelector("#currUnit").innerHTML = isCurrOpacity ? currUnitCnt-1 : currUnitCnt+1;
            return false;
        }

        function fncArkSelect(target){        
            isCurrOpacity = window.getComputedStyle(target).opacity >= 1;                        
            currArkCnt = Number(document.querySelector("#currArk").innerHTML);
            target.style.opacity = isCurrOpacity ? 0.3 : 1;        
            document.querySelector("#currArk").innerHTML = isCurrOpacity ? currArkCnt-1 : currArkCnt+1;            
            return false;
        }

        function fncUnitAllSelect(target){
            isFlag = selectUnitFlag >= 1;
            document.querySelectorAll("#unit > * img").forEach(function(item){ item.style.opacity = isFlag ? 0.3 : 1; });             
            selectUnitFlag = isFlag ? 0 : 1;     
            txt = "캐릭터 전체 " + (!isFlag ? "해제" : "선택");            
            target.innerText = txt;
            document.querySelector("#currUnit").innerHTML = isFlag ? 0 : maxUnitCnt;
            return false;
        }

        function fncArkAllSelect(target){
            isFlag = selectArkFlag >= 1;
            document.querySelectorAll("#ark > * img").forEach(function(item){ item.style.opacity = isFlag ? 0.3 : 1; });                         
            selectArkFlag = isFlag ? 0 : 1;     
            txt = "아크 전체 " + (!isFlag ? "해제" : "선택");            
            target.innerText = txt;
            document.querySelector("#currArk").innerHTML = isFlag ? 0 : maxArkCnt;
            return false;
        }
    </script>
</head>
<body style="background-color: black;">
    <div id="header">
        <div>
            <h2>LastCloudia KR CheckList</h2>                        
            <p>Created by 반갑다친구야</p>
            <p>PC로 사용하시는걸. 그나마 추천합니다.</p>                                
        </div>
    </div>
    <div id="wrapper">
        <div id="unit">            
            <div style="margin-bottom: 10px;">
                <button onclick="fncUnitAllSelect(this)">캐릭터 전체 선택</button>
                <p> 
                    <span id="currUnit">0</span>
                    <span> / </span>
                    <span id="maxUnit"></span>
                </p>
            </div>
        </div>
        <div id="ark">     
            <div style="margin-bottom: 10px;">
                <button onclick="fncArkAllSelect(this, '#ark')">아크 전체 선택</button>
                <p> 
                    <span id="currArk">0</span>
                    <span> / </span>
                    <span id="maxArk"></span>
                </p>
            </div>    
        </div>
    </div>
</body>
</html>